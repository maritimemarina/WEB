<html>
<head>
    <meta charset="utf-8"/>
    <link type="text/css" rel="stylesheet" href="styles.css"/>
    <script type="text/javascript" src="calc.js"></script>
    <script>
        //обработчик вводимых символов
        function keyPressed(e) {
            e = e || event;
            if (e.ctrlKey || e.altKey || e.metaKey){
                return "";
            }
            var chr = getChar(e);
            if (chr == null){
                return "";
            }
            if (chr == '+' || chr == '-' || chr == '*' || chr == '/' || chr == '='){
                return calc.operation(chr);
            }
            if (chr == '%'){
                return calc.percent();
            }
            if (chr == '.'){
                return calc.decimal();
            }
            if (chr < '0' || chr > '9'){
                return "";
            }
            return calc.numPressed(chr);
        }

        //получение символа в keypress
        function getChar(event) {
            if (event.which == null) {
                if (event.keyCode < 32) return null;
                return String.fromCharCode(event.keyCode)
            }
            if (event.which!=0 && event.charCode!=0) {
                if (event.which < 32) return null;
                return String.fromCharCode(event.which)
            }
            return null;
        }
    </script>
    <title>Калькулятор</title>
</head>
<body onload="calc.init('editWide')" onkeypress="keyPressed(event)">
<form id="calcForm" action="">
    <table class="tblCalc" cellpadding=0 cellspacing=0>
        <tr>
            <td colspan=5 align=middle>
                <input id="editWide" type="Text" size=28 value="0" width="250px">
            </td>
        </tr>
        <tr>
            <td colspan="3"></td>
            <td><input name="btnClear" type="Button" value="C" onclick="calc.clear()"/></td>
            <td><input name="btnClearEntry" type="Button" value="CE" onclick="calc.clearEntry()"/></td>
        </tr>
        <tr>
            <td><input name="btnSeven" type="Button" value="7" onclick="calc.numPressed(7)"></td>
            <td><input name="btnEight" type="Button" value="8" onclick="calc.numPressed(8)"></td>
            <td><input name="btnNine" type="Button" value="9" onclick="calc.numPressed(9)"></td>
            <td><input name="btnPlus" type="Button" value="+" onclick="calc.operation('+')"/></td>
            <td><input name="btnMultiply" type="Button" value="*" onclick="calc.operation('*')"/></td>
        </tr>
        <tr>
            <td><input name="btnFour" type="Button" value="4" onclick="calc.numPressed(4)"></td>
            <td><input name="btnFive" type="Button" value="5" onclick="calc.numPressed(5)"></td>
            <td><input name="btnSix" type="Button" value="6" onclick="calc.numPressed(6)"></td>
            <td><input name="btnMinus" type="Button" value="-" onclick="calc.operation('-')"/></td>
            <td align=middle><input name="btnDivide" type="Button" value=" / " onclick="calc.operation('/')"/></td>
        </tr>
        <tr>
            <td><input name="btnOne" type="Button" value="1" onclick="calc.numPressed(1)"></td>
            <td><input name="btnTwo" type="Button" value="2" onclick="calc.numPressed(2)"></td>
            <td><input name="btnThree" type="Button" value="3" onclick="calc.numPressed(3)"></td>
            <td><input name="btnPercent" type="Button" value="%" onclick="calc.percent()"/></td>
            <td align=middle>&nbsp;</td>
        </tr>
        <tr>
            <td><input name="btnZero" type="Button" value="0" onclick="calc.numPressed(0)"></td>
            <td><input name="btnDecimal" type="Button" value="." onclick="calc.decimal()"></td>
            <td><input name="btnNeg" type="button" value="+/-" onclick="calc.neg()"/></td>
            <td colspan="2"><input id="btnWide" name="btnEquals" type="Button" value="=" onclick="calc.operation('=')"></td>
        </tr>
    </table>
</form>
</body>
</html>